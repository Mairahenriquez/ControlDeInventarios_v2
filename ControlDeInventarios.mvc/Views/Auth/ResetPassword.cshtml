
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Auth.cshtml";
}

<div class="w-100 h-100 d-flex justify-content-center align-items-center flex-wrap">
    <div class="mx-auto w-100" style="max-width: 500px;">
        @if (TempData["error_message"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show mb-3" role="alert">
                @TempData["error_message"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
        @if (TempData["success_message"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show mb-3" role="alert">
                @TempData["success_message"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
        <div class="card mx-auto w-100">
            <div class="card-body">
                <h2>Restablecer Contraseña</h2>
                <p>

                </p>
                @if (TempData["hash"] == null) 
                {
                    <form action="@Url.Action("SetResetPassword","Auth")" method="post">
                        <div class="mt-3">
                            <label for="email" class="form-label">
                                Email
                            </label>
                            <input id="email"
                                value="admin@admin.com"
                                placeholder="Email"
                                type="email"
                                autocomplete="email"
                                class="form-control"
                                name="correo" />
                        </div>
                        <div class="mb-1 mt-3">
                            @* Volver a login *@
                            <a href="@Url.Action("Login", "Auth")">
                                Volver a Iniciar Sesión
                            </a>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-primary" type="submit">
                                Enviar Enlace
                            </button>
                        </div>
                    </form>
                }
                else
                {
                    <form action="@Url.Action("UpdatePassword","Auth")" method="post">
                        <input type="hidden" name="id" value='@TempData["hash"]' />
                        <div class="mt-3">
                            <label for="password" class="form-label">
                                Contraseña
                            </label>
                            <input id="password"
                                placeholder="Contraseña"
                                type="password"
                                autocomplete="new-password"
                                class="form-control"
                                name="clave" />
                        </div>
                        <div class="mt-3">
                            <label for="password_confirmation" class="form-label">
                                Confirmar Contraseña
                            </label>
                            <input id="password_confirmation"
                                placeholder="Confirmar Contraseña"
                                type="password"
                                autocomplete="new-password"
                                class="form-control"
                                name="confirmClave" />
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-primary" type="submit">
                                Restablecer Contraseña
                            </button>
                        </div>
                    </form>
                }
            </div>
        </div>
    </div>
</div>
